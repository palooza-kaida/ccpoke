@import "tailwindcss";

@theme {
  --color-bg: #FFFFFF;
  --color-bg-warm: #FAF9F7;
  --color-bg-code: #1A1A2E;
  --color-bg-code-2: #222239;
  --color-txt: #1A1A2E;
  --color-txt-2: #5A5A72;
  --color-txt-3: #8E8E9F;
  --color-accent: #D97757;
  --color-accent-hover: #C4623F;
  --color-accent-light: #FFF0EB;
  --color-emerald: #2E8B57;
  --color-emerald-light: #E8F5EE;
  --color-sky: #4A7FD4;
  --color-sky-light: #EBF2FC;
  --color-plum: #7C5CBF;
  --color-plum-light: #F1ECF9;
  --color-border: #EBEBEB;
  --color-term-text: #E0E0E0;
  --color-term-sub: #B0B0C0;
  --color-term-muted: #666666;
  --color-term-muted-hover: #CCCCCC;
  --color-term-dim: #999999;
  --color-term-dim-hover: #DDDDDD;
  --color-term-border-hover: #555555;
  --color-feat-icon: #F0F0F2;
  --color-plat-more: #F5F5F5;
  --color-term-comment: #606078;
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --max-width-content: 880px;
}

html { scroll-behavior: smooth }

body {
  font-family: var(--font-sans);
  background: var(--color-bg);
  color: var(--color-txt);
  line-height: 1.625;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--color-accent); text-decoration: none; transition: color .15s }
a:hover { color: var(--color-accent-hover) }

.flow-diagram {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 0;
  position: relative;
}

.flow-nodes {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  z-index: 2;
}

.flow-node {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.82rem;
  font-weight: 600;
  padding: 8px 16px;
  border-radius: 10px;
  background: var(--color-bg-warm);
  white-space: nowrap;
  cursor: default;
  user-select: none;
}

.flow-node__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.flow-node__icon svg { width: 100%; height: 100%; }

.flow-node--active .flow-node__icon { color: var(--color-txt-2); }
.flow-node--inactive .flow-node__icon { color: var(--color-txt-3); }



.flow-node--active {
  color: var(--color-txt);
  border: 1px solid rgba(217, 119, 87, 0.2);
}

.flow-node--inactive {
  color: var(--color-txt-3);
  border: 1px solid var(--color-border);
  opacity: 0.6;
}

.flow-nodes--left { align-items: flex-end; }
.flow-nodes--right { align-items: flex-start; }

.flow-center {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 280px;
  padding: 0 1rem;
}

.flow-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.flow-hub {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 10px 20px;
  border-radius: 12px;
  background: var(--color-accent-light);
  border: 2px solid var(--color-accent);
  animation: hub-glow 3s ease-in-out infinite;
}

@keyframes hub-glow {
  0%, 100% { box-shadow: 0 0 8px rgba(217, 119, 87, 0.15); }
  50% { box-shadow: 0 0 20px rgba(217, 119, 87, 0.3), 0 0 40px rgba(217, 119, 87, 0.1); }
}

.flow-hub__logo {
  width: 28px;
  height: 28px;
}

.flow-hub__logo svg { width: 100%; height: 100%; }

.flow-hub__label {
  font-size: 0.72rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-accent);
}

.flow-path {
  stroke-width: 1.5;
  fill: none;
  stroke-linecap: round;
}

.flow-path--active { stroke: rgba(217, 119, 87, 0.15); }

.flow-path--inactive {
  stroke: rgba(0, 0, 0, 0.06);
  stroke-dasharray: 4 6;
}



.timeline::before {
  content: '';
  position: absolute;
  left: 1.25rem;
  transform: translateX(-50%);
  top: 0.25rem;
  bottom: 0.25rem;
  width: 3px;
  border-radius: 2px;
  background: linear-gradient(to bottom, var(--color-emerald) 0%, var(--color-emerald) 16%, var(--color-accent) 16%, var(--color-accent) 32%, var(--color-border) 32%, var(--color-border) 100%);
}

.tl-dot {
  position: absolute;
  left: -30px;
  top: 0.25rem;
  width: 1.25rem;
  height: 1.25rem;
  border-radius: 50%;
  border: 3px solid var(--color-bg);
  z-index: 2;
}
.tl-dot.done { background: var(--color-emerald); box-shadow: 0 0 0 4px var(--color-emerald-light) }
.tl-dot.wip { background: var(--color-accent); box-shadow: 0 0 0 4px var(--color-accent-light) }
.tl-dot.soon { background: var(--color-border); box-shadow: 0 0 0 4px var(--color-feat-icon) }

.step-term .d { color: var(--color-accent); user-select: none }
.step-term .c { color: var(--color-term-comment) }
.step-term { white-space: pre; }

.lang-dropdown { position: relative }
.lang-trigger { display: flex; align-items: center; gap: 4px; padding: 5px 8px; border: none; background: transparent; font-family: var(--font-sans); font-size: 0.72rem; font-weight: 600; color: var(--color-txt-3); cursor: pointer; border-radius: 6px; transition: all 0.15s }
.lang-trigger:hover { background: #ECECEE; color: var(--color-txt) }
.lang-trigger svg { width: 10px; height: 10px; opacity: 0.4; transition: transform 0.2s }
.lang-dropdown.open .lang-trigger { background: var(--color-bg-warm); color: var(--color-txt-2) }
.lang-dropdown.open .lang-trigger svg { transform: rotate(180deg) }
.lang-menu { position: absolute; top: calc(100% + 6px); right: 0; min-width: 100px; background: white; border: none; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1), 0 0 0 1px rgba(0,0,0,0.04); padding: 4px; opacity: 0; visibility: hidden; transform: translateY(-4px); transition: all 0.15s ease }
.lang-dropdown.open .lang-menu { opacity: 1; visibility: visible; transform: translateY(0) }
.lang-option { display: flex; align-items: center; gap: 8px; width: 100%; padding: 7px 12px; border: none; background: transparent; font-family: var(--font-sans); font-size: 0.78rem; font-weight: 500; color: var(--color-txt-2); cursor: pointer; border-radius: 7px; transition: all 0.12s }
.lang-option:hover { background: var(--color-bg-warm); color: var(--color-txt) }
.lang-option.active { color: var(--color-accent); font-weight: 600 }
.lang-option.active::after { content: 'âœ“'; margin-left: auto; font-size: 0.7rem }

.mob-menu-btn { display: none; align-items: center; justify-content: center; width: 36px; height: 36px; border: none; background: transparent; cursor: pointer; border-radius: 8px; transition: background 0.15s; color: var(--color-txt-2) }
.mob-menu-btn:hover { background: #ECECEE; color: var(--color-txt) }
.mob-menu-btn svg { width: 20px; height: 20px }
.mob-nav-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.25); z-index: 150; opacity: 0; transition: opacity 0.2s }
.mob-nav-overlay.open { display: block; opacity: 1 }
.mob-nav-panel { position: fixed; top: 0; right: 0; bottom: 0; width: 260px; background: white; z-index: 200; transform: translateX(100%); transition: transform 0.25s ease; box-shadow: -4px 0 24px rgba(0,0,0,0.08); padding: 1.25rem }
.mob-nav-panel.open { transform: translateX(0) }
.mob-nav-panel a { display: block; padding: 12px 16px; font-size: 0.95rem; font-weight: 600; color: var(--color-txt-2); border-radius: 10px; transition: all 0.12s; text-decoration: none }
.mob-nav-panel a:hover { background: var(--color-bg-warm); color: var(--color-txt) }
.mob-nav-close { display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; border: none; background: transparent; cursor: pointer; border-radius: 8px; transition: background 0.15s; color: var(--color-txt-2); margin-left: auto; margin-bottom: 0.75rem }
.mob-nav-close:hover { background: #ECECEE }

.cta-bottom { text-align: center; padding: 3rem 2rem; background: var(--color-bg-warm); border-radius: 1.5rem; margin-bottom: 1rem }
.cta-bottom p { font-size: 0.92rem; color: var(--color-txt-2); margin-bottom: 1.25rem; line-height: 1.65 }
.cta-gh { display: inline-flex; align-items: center; gap: 8px; padding: 11px 24px; background: var(--color-txt); color: white; font-family: var(--font-sans); font-size: 0.88rem; font-weight: 700; border: none; border-radius: 10px; cursor: pointer; text-decoration: none; transition: all 0.2s }
.cta-gh:hover { background: #333; color: white; transform: translateY(-1px) }
.cta-gh svg { width: 16px; height: 16px }

/* ========== Response Viewer (rv-*) ========== */

.rv { min-height: calc(100vh - 3.5rem); }

.rv-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.rv-header__left {
  font-family: var(--font-mono);
  font-size: 0.78rem;
  font-weight: 500;
  color: var(--color-accent);
}

.rv-header__right {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.75rem;
  font-weight: 400;
  color: var(--color-txt-3);
}

.rv-header__model {
  font-family: var(--font-mono);
  font-size: 0.68rem;
  font-weight: 600;
  color: var(--color-plum);
  background: var(--color-plum-light);
  padding: 2px 8px;
  border-radius: 6px;
  letter-spacing: -0.01em;
}

.rv__body {
  max-width: var(--max-width-content);
  margin: 0 auto;
  padding: 2rem 1.5rem 4rem;
  overflow-x: hidden;
}

/* ---- Changes ---- */

.rv-changes {
  margin-top: 1.5rem;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  overflow: hidden;
}

.rv-changes__toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 0.6rem 0.875rem;
  border: none;
  background: var(--color-bg-warm);
  cursor: pointer;
  font-family: var(--font-sans);
  font-size: 0.78rem;
  font-weight: 700;
  color: var(--color-txt);
  transition: background 0.15s;
}

.rv-changes__toggle:hover { background: #F0EFED; }

.rv-changes__label { margin-right: 2px; }

.rv-changes__badge {
  font-size: 0.68rem;
  font-weight: 700;
  color: var(--color-bg);
  background: var(--color-txt-3);
  padding: 1px 7px;
  border-radius: 10px;
  line-height: 1.5;
}

.rv-changes__stats {
  display: flex;
  gap: 4px;
  margin-left: auto;
}

.rv-stat {
  font-size: 0.68rem;
  font-weight: 700;
  font-family: var(--font-mono);
  padding: 0 5px;
  border-radius: 3px;
}

.rv-stat--add { color: var(--color-emerald); background: var(--color-emerald-light); }
.rv-stat--mod { color: var(--color-accent); background: var(--color-accent-light); }
.rv-stat--del { color: #C53030; background: #FDECEC; }
.rv-stat--ren { color: var(--color-plum); background: var(--color-plum-light); }

.rv-changes__arrow {
  color: var(--color-txt-3);
  transition: transform 0.2s ease;
  flex-shrink: 0;
}

.rv-changes__arrow--open { transform: rotate(180deg); }

.rv-changes__list { padding: 2px 0; }

.rv-changes__file {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0.375rem 0.875rem;
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: var(--color-txt-2);
  transition: background 0.1s;
}

.rv-changes__file:hover { background: var(--color-bg-warm); }

.rv-changes__status {
  flex-shrink: 0;
  width: 20px;
  text-align: center;
  font-size: 0.68rem;
  font-weight: 700;
  font-family: var(--font-sans);
  padding: 1px 0;
  border-radius: 3px;
}

.rv-changes__path {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.rv-changes__dir { color: var(--color-txt-3); }
.rv-changes__name { color: var(--color-txt); font-weight: 500; }

/* ---- Loading ---- */

.rv-loading { padding-top: 0.5rem; }

.rv-loading__bar {
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
  background-size: 200% 100%;
  animation: rv-bar 1.2s ease-in-out infinite;
  border-radius: 1px;
  margin-bottom: 2rem;
}

.rv-loading__skeleton { display: flex; flex-direction: column; gap: 10px; }

.rv-skel {
  height: 14px;
  border-radius: 4px;
  background: var(--color-border);
  opacity: 0.5;
  animation: rv-pulse 1.8s ease-in-out infinite;
}

.rv-skel--h1 { width: 55%; height: 20px; margin-bottom: 6px; }
.rv-skel--h2 { width: 40%; height: 18px; margin-top: 12px; margin-bottom: 4px; }
.rv-skel--p { width: 100%; }
.rv-skel--mid { width: 80%; }
.rv-skel--short { width: 60%; }
.rv-skel--gap { height: 8px; background: none; animation: none; }

/* ---- Error ---- */

.rv-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 4rem 1rem;
  color: var(--color-txt-3);
}

.rv-error__icon { margin-bottom: 0.75rem; opacity: 0.4; }

.rv-error__text {
  font-size: 0.88rem;
  line-height: 1.6;
  max-width: 320px;
  margin: 0;
}

/* ---- Markdown ---- */

.md-body {
  min-width: 0;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.md-table-wrap {
  display: flex;
  overflow-x: auto;
  overflow-y: hidden;
  margin: 0 0 0.875rem;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  -webkit-overflow-scrolling: touch;
}

.md-body .md-table-wrap table {
  margin: 0;
  border: none;
  border-radius: 0;
}

.md-table-wrap th:first-child,
.md-table-wrap td:first-child { border-left: none; }
.md-table-wrap th:last-child,
.md-table-wrap td:last-child { border-right: none; }
.md-table-wrap tr:first-child th { border-top: none; }
.md-table-wrap tr:last-child td { border-bottom: none; }

.md-body h1 {
  font-size: 1.4rem;
  font-weight: 800;
  margin: 1.75rem 0 0.75rem;
  color: var(--color-txt);
  letter-spacing: -0.02em;
}

.md-body h1:first-child { margin-top: 0; }

.md-body h2 {
  font-size: 1.15rem;
  font-weight: 700;
  margin: 1.5rem 0 0.5rem;
  color: var(--color-txt);
  letter-spacing: -0.01em;
}

.md-body h3 {
  font-size: 1rem;
  font-weight: 700;
  margin: 1.25rem 0 0.375rem;
  color: var(--color-txt);
}

.md-body p { margin: 0 0 0.75rem; color: var(--color-txt-2); }
.md-body a { color: var(--color-accent); }
.md-body a:hover { color: var(--color-accent-hover); text-decoration: underline; }
.md-body strong { color: var(--color-txt); font-weight: 700; }
.md-body em { color: var(--color-txt-2); }

.md-body ul, .md-body ol {
  margin: 0 0 0.75rem;
  padding-left: 1.5rem;
  color: var(--color-txt-2);
}

.md-body ul { list-style-type: disc; }
.md-body ol { list-style-type: decimal; }

.md-body li { margin-bottom: 3px; }
.md-body li::marker { color: var(--color-accent); }

.md-body code {
  font-family: var(--font-mono);
  font-size: 0.82em;
  background: var(--color-bg-warm);
  color: var(--color-accent);
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid var(--color-border);
}

.md-body pre {
  margin: 0 0 0.875rem;
  border-radius: 10px;
  overflow: hidden;
  background: var(--color-bg-code);
}

.md-body pre code {
  display: block;
  padding: 1rem 1.125rem;
  font-size: 0.78rem;
  line-height: 1.65;
  background: var(--color-bg-code);
  border: none;
  overflow-x: auto;
  color: var(--color-term-text);
}

.md-body blockquote {
  margin: 0 0 0.75rem;
  padding: 0.625rem 1rem;
  border-left: 3px solid var(--color-accent);
  background: var(--color-accent-light);
  border-radius: 0 8px 8px 0;
  color: var(--color-txt-2);
}

.md-body blockquote p:last-child { margin: 0; }

.md-body table {
  width: 100%;
  margin: 0 0 0.875rem;
  border-collapse: collapse;
  font-size: 0.82rem;
}

.md-body th {
  background: var(--color-bg-warm);
  font-weight: 700;
  text-align: left;
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--color-border);
  color: var(--color-txt);
  white-space: nowrap;
}

.md-body td {
  padding: 0.4rem 0.75rem;
  border: 1px solid var(--color-border);
  color: var(--color-txt-2);
  max-width: 280px;
}

.md-body hr { margin: 1.5rem 0; border: none; height: 0; }
.md-body img { max-width: 100%; border-radius: 10px; }

/* ---- Animations ---- */

@keyframes spin { to { transform: rotate(360deg); } }

@keyframes rv-bar {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes rv-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.7; }
}

/* ---- Mobile ---- */

@media (max-width: 700px) {
  body { font-size: 0.9rem; }
  main { padding-left: 1rem !important; padding-right: 1rem !important; }
  nav > div { padding-left: 1rem; padding-right: 1rem; }

  .flow-diagram { grid-template-columns: 1fr; gap: 0.5rem; }
  .flow-svg { display: none; }
  .flow-center { min-height: auto; padding: 0; }
  .flow-nodes { flex-direction: row; flex-wrap: wrap; justify-content: center; }
  .flow-nodes--left { order: 1; align-items: center; }
  .flow-center { order: 2; }
  .flow-nodes--right { order: 3; align-items: center; }
  .flow-hub { margin: 0.5rem auto; }
  .flow-node { font-size: 0.75rem; padding: 6px 12px; }
  .nav-hide-mobile { display: none }
  .mob-menu-btn { display: flex !important; }
  .hero-section { padding: 2.5rem 0 1.5rem }
  .hero-section p { font-size: 0.92rem; }
  .sect-section { padding: 2.5rem 0 }
  .sect-section > div:first-child h2 { font-size: 1.35rem; }
  .sect-section > div:first-child p { font-size: 0.85rem; }
  .t-right-wrap .pm-tab { padding: 4px 6px; font-size: 0.65rem; }
  #cplbl { display: none }
  #cpbtn { padding: 4px 8px; }
  .step-term { white-space: pre-wrap; word-break: break-all; font-size: 0.75rem; line-height: 1.7; padding: 0.875rem 1rem; }
  .timeline { padding-left: 2.5rem !important; }
  .timeline::before { left: 1.125rem !important; }
  .tl-dot { left: -1.875rem !important; width: 1rem !important; height: 1rem !important; }
  .timeline h3 { font-size: 1rem; }
  .timeline p { font-size: 0.78rem; }
  .tl-item { padding-bottom: 2rem; }
  .tl-item .flex.flex-wrap span { padding: 7px 14px !important; font-size: 0.8rem !important; }

  #features .grid { grid-template-columns: 40px 1fr; gap: 0.875rem; padding-top: 1.25rem; padding-bottom: 1.25rem; }
  #features .grid h3 { font-size: 0.9rem; }
  #features .grid p { font-size: 0.82rem; }
  #features .grid > div:first-child { width: 40px; height: 40px; }

  #setup .grid { gap: 0.75rem; }
  #setup .grid h3 { font-size: 0.9rem; }
  #setup .grid p { font-size: 0.82rem; }
  #setup .flex.flex-col { gap: 1.75rem; }

  .hero-section img { width: 56px; height: 56px; }
  .sect-section > div:first-child { margin-bottom: 1.5rem; }
  .cta-bottom { padding: 2rem 1.25rem; }
  .cta-bottom p { font-size: 0.82rem; }

  .rv-header { margin-bottom: 0.75rem; }
  .rv-header__left { font-size: 0.7rem; }
  .rv-header__right { font-size: 0.68rem; }
  .rv__body { padding: 1.25rem 1rem 3rem; }
  .rv-changes__toggle { padding: 0.5rem 0.75rem; font-size: 0.75rem; }
  .rv-changes__stats { gap: 3px; }
  .rv-stat { font-size: 0.6rem; padding: 0 3px; }
  .rv-changes__file { padding: 0.3rem 0.75rem; font-size: 0.7rem; }


  .md-body { font-size: 0.88rem; }
  .md-body h1 { font-size: 1.2rem; }
  .md-body h2 { font-size: 1.05rem; }
  .md-body pre code { font-size: 0.72rem; padding: 0.75rem 0.875rem; }
}

@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto }
  .rv-loading__bar, .rv-skel { animation: none; }
  .flow-path-pulse { animation: none; stroke-dasharray: none; }
}
