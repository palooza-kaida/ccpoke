---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ResponseViewer from "../../components/response/ResponseViewer";
import { SUPPORTED_LOCALES, DEFAULT_LOCALE, type Locale } from "../../i18n";

export function getStaticPaths() {
  return SUPPORTED_LOCALES
    .filter((l) => l !== DEFAULT_LOCALE)
    .map((locale) => ({ params: { locale }, props: { locale } }));
}

const locale = (Astro.props.locale ?? DEFAULT_LOCALE) as Locale;
---

<BaseLayout locale={locale} title="ccpoke — Response" description="AI agent response viewer — ccpoke" currentPath="/response">
  <script is:inline>
    (function() {
      var s = document.createElement('script');
      s.src = 'https://telegram.org/js/telegram-web-app.js';
      s.async = true;
      s.onerror = function() {};
      document.head.appendChild(s);
    })();
  </script>
  <ResponseViewer client:load />
</BaseLayout>
